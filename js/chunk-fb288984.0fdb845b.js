(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb288984"],{"9c63":function(t,e,i){"use strict";i.r(e);i("caad"),i("2532");var c=i("7a23"),a={class:"favorite"},o={class:"container"},r={class:"title"},s=Object(c["g"])("h2",null,"您的追蹤清單",-1),n={class:"product-area row"},l={class:"product-item"},d={key:0,class:"tag"},f=Object(c["g"])("div",{class:"angle"},null,-1),b={class:"product-img"},u=["src","alt"],O={class:"product-txt"},v={class:"product-title"},j={class:"product-price"},g={key:0},p={class:"cart-btn"},h=["onClick"],I=Object(c["g"])("i",{class:"fa-solid fa-cart-shopping"},null,-1),m=Object(c["i"])("加入購物車"),L=[I,m],k=["onClick"],y=Object(c["g"])("i",{class:"fa-solid fa-heart"},null,-1),S=[y],w=["onClick"],z=Object(c["g"])("i",{class:"fa-regular fa-heart"},null,-1),C=[z];function J(t,e,i,I,m,y){var z=Object(c["F"])("Loading"),J=Object(c["F"])("router-link");return Object(c["z"])(),Object(c["f"])("div",a,[m.isLoading?(Object(c["z"])(),Object(c["d"])(z,{key:0})):Object(c["e"])("",!0),Object(c["g"])("div",o,[Object(c["g"])("div",r,[s,Object(c["g"])("span",null,"共 "+Object(c["I"])(m.favoriteList.length)+" 項",1)]),Object(c["g"])("ul",n,[(Object(c["z"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(m.favoriteList,(function(t){return Object(c["z"])(),Object(c["f"])("li",{class:"product-card col-12 col-md-6 col-lg-3",key:t.id},[Object(c["g"])("div",l,[Object(c["j"])(J,{to:"/product/".concat(t.id)},{default:Object(c["R"])((function(){return[t.tag?(Object(c["z"])(),Object(c["f"])("div",d,[Object(c["i"])(Object(c["I"])(t.tag)+" ",1),f])):Object(c["e"])("",!0),Object(c["g"])("div",b,[Object(c["g"])("img",{src:t.imageUrl,alt:t.title},null,8,u)]),Object(c["g"])("div",O,[Object(c["g"])("div",v,[Object(c["g"])("h3",null,Object(c["I"])(t.title),1),Object(c["g"])("span",null,Object(c["I"])(t.category),1)]),Object(c["g"])("div",j,[t.origin_price!==t.price?(Object(c["z"])(),Object(c["f"])("del",g,Object(c["I"])(t.origin_price)+" G",1)):Object(c["e"])("",!0),Object(c["g"])("p",null,Object(c["I"])(t.price)+" G",1)])])]})),_:2},1032,["to"]),Object(c["g"])("div",p,[Object(c["g"])("button",{type:"button",onClick:function(e){return y.addToCart(t.id)}},L,8,h)]),m.favoriteId.includes(t.id)?(Object(c["z"])(),Object(c["f"])("div",{key:0,class:"fav-heart",onClick:function(e){return y.removeFavorite(t)}},S,8,k)):(Object(c["z"])(),Object(c["f"])("div",{key:1,class:"fav-heart",onClick:function(e){return y.addFavorite(t)}},C,8,w))])])})),128))])])])}var F=i("2909"),N=(i("99af"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("e9c4"),i("159b"),i("a434"),i("c2a1")),_={data:function(){return{isLoading:!1,favoriteId:[],favoriteList:[]}},components:{Loading:N["a"]},inject:["emitter"],methods:{addToCart:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c={product_id:t,qty:i};this.$http.post("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart"),{data:c}).then((function(){e.isLoading=!1,e.emitter.emit("push-cart"),e.emitter.emit("push-toast",{style:"success",title:"已加入購物車"})})).catch((function(t){e.emitter.emit("push-toast",{style:"danger",title:"加入購物車失敗",content:t.response.data.message})}))},addFavorite:function(t){this.favoriteList.push(t),this.favoriteId.push(t.id),this.favoriteList=Object(F["a"])(new Set(this.favoriteList)),this.favoriteId=Object(F["a"])(new Set(this.favoriteId)),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},removeFavorite:function(t){var e=this;this.favoriteList.forEach((function(i,c){i.id===t.id&&(e.favoriteList.splice(c,1),localStorage.setItem("favoriteList",JSON.stringify(e.favoriteList)))})),this.favoriteId.forEach((function(i,c){i===t.id&&(e.favoriteId.splice(c,1),localStorage.setItem("favoriteId",JSON.stringify(e.favoriteId)))}))}},mounted:function(){this.favoriteList=JSON.parse(localStorage.getItem("favoriteList"))||[],this.favoriteId=JSON.parse(localStorage.getItem("favoriteId"))||[]}},E=(i("b940"),i("6b0d")),x=i.n(E);const G=x()(_,[["render",J]]);e["default"]=G},b940:function(t,e,i){"use strict";i("d65d")},d65d:function(t,e,i){}}]);
//# sourceMappingURL=chunk-fb288984.0fdb845b.js.map