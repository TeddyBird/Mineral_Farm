(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4590878e"],{"0343":function(t,e,c){"use strict";c.r(e);c("99af"),c("caad"),c("2532"),c("a4d3"),c("e01a");var i=c("7a23"),a={class:"product"},r={class:"product-content"},o={class:"container"},s={class:"row"},n={class:"col-12 col-lg-5"},l={class:"product-img"},d={class:"main-img"},u=["src","alt"],g={class:"switch-imgs"},b=["onClick"],p=["src","alt"],f={class:"col-12 col-lg-7"},O={class:"product-txt"},j={class:"category"},v=Object(i["g"])("i",{class:"fa-solid fa-heart"},null,-1),h=[v],m=Object(i["g"])("i",{class:"fa-regular fa-heart"},null,-1),y=[m],I=Object(i["g"])("span",{class:"description"},"【產品介紹】",-1),k=Object(i["g"])("span",{class:"description"},"【生長週期】",-1),L={class:"product-price"},C={key:0},S={class:"price"},z={class:"shopcart"},w={class:"counter"},N=["disabled"],P=Object(i["g"])("i",{class:"fa-solid fa-minus"},null,-1),q=[P],F=Object(i["g"])("i",{class:"fa-solid fa-plus"},null,-1),J=[F],U=Object(i["g"])("i",{class:"fa-solid fa-cart-shopping"},null,-1),$=Object(i["i"])("加入購物車"),_=[U,$],x={key:0,class:"relative"},E=Object(i["g"])("h2",null,"你可能也會喜歡...",-1),G={class:"container"},R={class:"product-area row"},T={class:"product-item"},M={key:0,class:"tag"},A=Object(i["g"])("div",{class:"angle"},null,-1),V={class:"product-img"},B=["src","alt"],D={class:"product-txt"},H={class:"product-title"},K={class:"product-price"},Q={key:0},W={class:"cart-btn"},X=["onClick"],Y=Object(i["g"])("i",{class:"fa-solid fa-cart-shopping"},null,-1),Z=Object(i["i"])("加入購物車"),tt=[Y,Z],et=["onClick"],ct=Object(i["g"])("i",{class:"fa-solid fa-heart"},null,-1),it=[ct],at=["onClick"],rt=Object(i["g"])("i",{class:"fa-regular fa-heart"},null,-1),ot=[rt];function st(t,e,c,v,m,P){var F=Object(i["F"])("Loading"),U=Object(i["F"])("router-link");return Object(i["z"])(),Object(i["f"])(i["a"],null,[m.isLoading?(Object(i["z"])(),Object(i["d"])(F,{key:0})):Object(i["e"])("",!0),Object(i["g"])("div",a,[Object(i["g"])("div",r,[Object(i["g"])("div",o,[Object(i["g"])("div",s,[Object(i["g"])("div",n,[Object(i["g"])("div",l,[Object(i["g"])("div",d,[Object(i["g"])("img",{src:m.product.imageUrl,ref:"mainImg",alt:"".concat(m.product.title,"圖片1")},null,8,u)]),Object(i["g"])("div",g,[(Object(i["z"])(!0),Object(i["f"])(i["a"],null,Object(i["E"])(m.product.imagesUrl,(function(t,e){return Object(i["z"])(),Object(i["f"])("div",{class:Object(i["r"])(["switch-img",{tempimg:t===m.temImage}]),key:t+1,onClick:function(t){return P.changeImg(e)}},[Object(i["g"])("img",{src:t,alt:"".concat(m.product.title,"圖片").concat(e+1)},null,8,p)],10,b)})),128))])])]),Object(i["g"])("div",f,[Object(i["g"])("div",O,[Object(i["g"])("span",j,Object(i["I"])(m.product.category),1),Object(i["g"])("h2",null,[Object(i["i"])(Object(i["I"])(m.product.title)+" ",1),Object(i["g"])("span",null,[m.favoriteId.includes(m.product.id)?(Object(i["z"])(),Object(i["f"])("div",{key:0,class:"fav-heart",onClick:e[0]||(e[0]=function(t){return P.removeFavorite(m.product)})},h)):(Object(i["z"])(),Object(i["f"])("div",{key:1,class:"fav-heart",onClick:e[1]||(e[1]=function(t){return P.addFavorite(m.product)})},y))])]),I,Object(i["g"])("p",null,Object(i["I"])(m.product.description),1),k,Object(i["g"])("p",null,Object(i["I"])(m.product.content),1),Object(i["g"])("div",L,[m.product.origin_price!==m.product.price?(Object(i["z"])(),Object(i["f"])("del",C,Object(i["I"])(m.product.origin_price)+" G",1)):Object(i["e"])("",!0),Object(i["g"])("p",S,Object(i["I"])(m.product.price)+" G",1)]),Object(i["g"])("div",z,[Object(i["g"])("div",w,[Object(i["g"])("button",{type:"button",class:"minus",onClick:e[2]||(e[2]=function(){return P.minusNum&&P.minusNum.apply(P,arguments)}),disabled:1===m.qty},q,8,N),Object(i["S"])(Object(i["g"])("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=function(t){return m.qty=t}),disabled:""},null,512),[[i["N"],m.qty,void 0,{number:!0}]]),Object(i["g"])("button",{type:"button",class:"plus",onClick:e[4]||(e[4]=function(){return P.plusNum&&P.plusNum.apply(P,arguments)})},J)]),Object(i["g"])("button",{type:"button",class:"add-cart",onClick:e[5]||(e[5]=function(t){return P.addToCart(m.product.id)})},_)])])])])])]),0!==m.relativeProducts.length?(Object(i["z"])(),Object(i["f"])("div",x,[E,Object(i["g"])("div",G,[Object(i["g"])("ul",R,[(Object(i["z"])(!0),Object(i["f"])(i["a"],null,Object(i["E"])(m.relativeProducts,(function(t){return Object(i["z"])(),Object(i["f"])("li",{class:"product-card col-12 col-md-6 col-lg-3",key:t.id},[Object(i["g"])("div",T,[Object(i["j"])(U,{to:"/product/".concat(t.id)},{default:Object(i["R"])((function(){return[t.tag?(Object(i["z"])(),Object(i["f"])("div",M,[Object(i["i"])(Object(i["I"])(t.tag)+" ",1),A])):Object(i["e"])("",!0),Object(i["g"])("div",V,[Object(i["g"])("img",{src:t.imageUrl,alt:t.title},null,8,B)]),Object(i["g"])("div",D,[Object(i["g"])("div",H,[Object(i["g"])("h3",null,Object(i["I"])(t.title),1),Object(i["g"])("span",null,Object(i["I"])(t.category),1)]),Object(i["g"])("div",K,[t.origin_price!==t.price?(Object(i["z"])(),Object(i["f"])("del",Q,Object(i["I"])(t.origin_price)+" G",1)):Object(i["e"])("",!0),Object(i["g"])("p",null,Object(i["I"])(t.price)+" G",1)])])]})),_:2},1032,["to"]),Object(i["g"])("div",W,[Object(i["g"])("button",{type:"button",onClick:function(e){return P.addToCart(t.id)}},tt,8,X)]),m.favoriteId.includes(t.id)?(Object(i["z"])(),Object(i["f"])("div",{key:0,class:"fav-heart",onClick:function(e){return P.removeFavorite(t)}},it,8,et)):(Object(i["z"])(),Object(i["f"])("div",{key:1,class:"fav-heart",onClick:function(e){return P.addFavorite(t)}},ot,8,at))])])})),128))])])])):Object(i["e"])("",!0)])],64)}var nt=c("2909"),lt=(c("4de4"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("e9c4"),c("159b"),c("a434"),c("c2a1")),dt={data:function(){return{isLoading:!1,product:"",category:"",temImage:"",qty:1,relativeProducts:[],favoriteId:[],favoriteList:[],id:""}},components:{Loading:lt["a"]},inject:["emitter"],methods:{getProduct:function(){var t=this;this.isLoading=!0,this.relativeProducts=[];var e=this.$route.params.id;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/product/").concat(e)).then((function(e){t.isLoading=!1,t.product=e.data.product,t.category=e.data.product.category,t.id=e.data.product.id,t.temImage=e.data.product.imageUrl,t.getRelative()}))},getRelative:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id;this.$http.get("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/products?category=").concat(this.category)).then((function(c){t.isLoading=!1;var i=c.data.products.filter((function(c){return c.category===t.category&&c.id!==e}));if(i.length>=4)for(var a=0;a<4;a++){var r=Math.floor(Math.random()*i.length);t.relativeProducts.includes(i[r])?a--:t.relativeProducts.push(i[r])}else for(var o=0;o<i.length;o++)t.relativeProducts.push(i[o])}))},changeImg:function(t){this.$refs.mainImg.src=this.product.imagesUrl[t],this.temImage=this.product.imagesUrl[t]},plusNum:function(){this.qty++},minusNum:function(){this.qty--},addToCart:function(t){var e=this,c={product_id:t,qty:this.qty};this.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart"),{data:c}).then((function(){e.isLoading=!1,e.emitter.emit("push-cart"),e.emitter.emit("push-toast",{style:"success",title:"已加入購物車"})})).catch((function(t){e.emitter.emit("push-toast",{style:"danger",title:"加入購物車失敗",content:t.response.data.message})}))},addFavorite:function(t){this.favoriteList.push(t),this.favoriteId.push(t.id),this.favoriteList=Object(nt["a"])(new Set(this.favoriteList)),this.favoriteId=Object(nt["a"])(new Set(this.favoriteId)),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},removeFavorite:function(t){var e=this;this.favoriteList.forEach((function(c,i){c.id===t.id&&(e.favoriteList.splice(i,1),localStorage.setItem("favoriteList",JSON.stringify(e.favoriteList)))})),this.favoriteId.forEach((function(c,i){c===t.id&&(e.favoriteId.splice(i,1),localStorage.setItem("favoriteId",JSON.stringify(e.favoriteId)))}))}},watch:{$route:function(t){this.id=t.params.id,this.getProduct()}},mounted:function(){this.getProduct(),this.favoriteList=JSON.parse(localStorage.getItem("favoriteList"))||[],this.favoriteId=JSON.parse(localStorage.getItem("favoriteId"))||[]}},ut=(c("e125"),c("6b0d")),gt=c.n(ut);const bt=gt()(dt,[["render",st]]);e["default"]=bt},"4de4":function(t,e,c){"use strict";var i=c("23e7"),a=c("b727").filter,r=c("1dde"),o=r("filter");i({target:"Array",proto:!0,forced:!o},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},d883:function(t,e,c){},e125:function(t,e,c){"use strict";c("d883")}}]);
//# sourceMappingURL=chunk-4590878e.e15b58b0.js.map