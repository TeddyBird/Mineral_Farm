(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-465f0342"],{"04f9":function(t,e,c){"use strict";c("65f4")},"114d":function(t,e,c){},"15d4":function(t,e,c){t.exports=c.p+"img/cherry_sad.9d694603.png"},"65f4":function(t,e,c){},"7b9c":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a=c("15d4"),o=c.n(a),s={class:"cart"},i=Object(n["g"])("ol",{class:"cart-progress"},[Object(n["g"])("li",{class:"cur-step"},[Object(n["g"])("span",null,"step 1"),Object(n["i"])("確認清單")]),Object(n["g"])("li",null,[Object(n["g"])("span",null,"step 2"),Object(n["i"])("填寫資料")]),Object(n["g"])("li",null,[Object(n["g"])("span",null,"step 3"),Object(n["i"])("確認付款")]),Object(n["g"])("li",null,[Object(n["g"])("span",null,"step 4"),Object(n["i"])("完成訂單")])],-1),l={class:"container"},r={class:"row"},u={class:"col-12 col-md-7"},d={class:"cart-content"},b=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{colspan:"2"},"品名"),Object(n["g"])("th",null,"數量"),Object(n["g"])("th",null,"單位"),Object(n["g"])("th",null,"小計"),Object(n["g"])("th",null,"刪除")])],-1),p={key:0},j={class:"no-item",colspan:"6"},O=Object(n["i"])(" 您的購物車內還沒有商品，趕快前往"),g=Object(n["i"])("商店"),f=Object(n["i"])("吧! "),h=["src","alt"],m=["onUpdate:modelValue","onChange"],v=["onClick"],y=Object(n["g"])("i",{class:"fa-solid fa-trash"},null,-1),C=[y],k={key:0,class:"remove-check"},I={class:"remove-check-area"},D=Object(n["g"])("i",{class:"fa-solid fa-xmark"},null,-1),L=[D],z=Object(n["g"])("div",{class:"remove-img"},[Object(n["g"])("img",{src:o.a,alt:"精靈傷心表情\r\n                                    "})],-1),x={key:0},w=Object(n["i"])("確認刪除"),$=Object(n["g"])("span",null,"全部商品",-1),U=Object(n["i"])("嗎?"),_=[w,$,U],q={key:1},G=Object(n["i"])("確認刪除"),A=Object(n["i"])("嗎?"),N=["onClick"],S={key:1},V={colspan:"6"},E=Object(n["g"])("i",{class:"fa-solid fa-trash"},null,-1),F=Object(n["i"])("刪除全部 "),J=[E,F],M={class:"col-12 col-md-5"},R={class:"cart-total"},T=Object(n["g"])("h3",null,"訂單總額",-1),B={key:0,class:"total money"},H=Object(n["g"])("span",null,"小計",-1),K={key:1,class:"discount money"},P=Object(n["g"])("span",null,"折扣",-1),Q={class:"finall-total money"},W=Object(n["g"])("span",null,"總計",-1),X={key:2,class:"coupon-btn"},Y={class:"step-btn"};function Z(t,e,c,a,o,y){var D=this,w=Object(n["F"])("Loading"),$=Object(n["F"])("router-link");return Object(n["z"])(),Object(n["f"])("div",s,[o.isLoading?(Object(n["z"])(),Object(n["d"])(w,{key:0})):Object(n["e"])("",!0),i,Object(n["g"])("div",l,[Object(n["g"])("div",r,[Object(n["g"])("div",u,[Object(n["g"])("table",d,[b,Object(n["g"])("tbody",null,[0===o.cartData.carts.length?(Object(n["z"])(),Object(n["f"])("tr",p,[Object(n["g"])("td",j,[O,Object(n["j"])($,{to:"/products"},{default:Object(n["R"])((function(){return[g]})),_:1}),f])])):Object(n["e"])("",!0),(Object(n["z"])(!0),Object(n["f"])(n["a"],null,Object(n["E"])(o.cartData.carts,(function(t){return Object(n["z"])(),Object(n["f"])("tr",{key:t.id},[Object(n["g"])("td",null,[Object(n["g"])("img",{src:t.product.imageUrl,alt:t.product.title},null,8,h)]),Object(n["g"])("td",null,Object(n["I"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["S"])(Object(n["g"])("input",{min:"1",type:"number","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return y.updateCart(t)}},null,40,m),[[n["N"],t.qty,void 0,{number:!0}]])]),Object(n["g"])("td",null,Object(n["I"])(t.product.unit),1),Object(n["g"])("td",null,Object(n["I"])(t.total)+" G",1),Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",onClick:function(e){return o.removeId=t.product.id}},C,8,v)]),o.removeId===t.product.id||"all"===o.removeId?(Object(n["z"])(),Object(n["f"])("div",k,[Object(n["g"])("div",I,[Object(n["g"])("span",{class:"close",onClick:e[0]||(e[0]=function(t){return o.removeId=""})},L),z,"all"===o.removeId?(Object(n["z"])(),Object(n["f"])("p",x,_)):(Object(n["z"])(),Object(n["f"])("p",q,[G,Object(n["g"])("span",null,Object(n["I"])(t.product.title),1),A])),Object(n["g"])("button",{type:"button",onClick:function(e){return"all"===o.removeId?y.removeAllCart():y.removeCart(t.id)}},"確認",8,N)])])):Object(n["e"])("",!0)])})),128)),0!==o.cartData.carts.length?(Object(n["z"])(),Object(n["f"])("tr",S,[Object(n["g"])("td",V,[Object(n["g"])("button",{type:"button",onClick:e[1]||(e[1]=function(t){return o.removeId="all"}),class:"remove-btn"},J)])])):Object(n["e"])("",!0)])])]),Object(n["g"])("div",M,[Object(n["g"])("div",R,[T,o.couponUsed?(Object(n["z"])(),Object(n["f"])("div",B,[H,Object(n["g"])("p",null,Object(n["I"])(o.cartData.total)+" G",1)])):Object(n["e"])("",!0),o.couponUsed?(Object(n["z"])(),Object(n["f"])("div",K,[P,Object(n["g"])("p",null,"- "+Object(n["I"])(o.cartData.total-o.cartData.final_total)+" G",1)])):Object(n["e"])("",!0),Object(n["g"])("div",Q,[W,Object(n["g"])("p",null,Object(n["I"])(o.cartData.final_total)+" G",1)]),0!==o.cartData.carts.length?(Object(n["z"])(),Object(n["f"])("div",X,[Object(n["S"])(Object(n["g"])("input",{ref:"couponinput",type:"text",placeholder:"小遊戲可取得優惠碼喔!","onUpdate:modelValue":e[2]||(e[2]=function(t){return o.couponCode=t})},null,512),[[n["N"],o.couponCode]]),Object(n["g"])("button",{type:"button",onClick:e[3]||(e[3]=function(){return y.useCoupon&&y.useCoupon.apply(y,arguments)})},"使用")])):Object(n["e"])("",!0),Object(n["g"])("div",Y,[Object(n["g"])("button",{type:"button",onClick:e[4]||(e[4]=function(t){return D.$router.push("/products")})},"回到商店"),0!==o.cartData.carts.length?(Object(n["z"])(),Object(n["f"])("button",{key:0,type:"button",class:"to-order",onClick:e[5]||(e[5]=function(t){return D.$router.push("/order")})},"下一步")):Object(n["e"])("",!0)])])])])])])}c("99af");var tt=c("c2a1"),et={data:function(){return{isLoading:!1,cartData:{carts:[]},couponCode:"",couponUsed:!1,removeId:""}},components:{Loading:tt["a"]},inject:["emitter"],methods:{getCartData:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart")).then((function(e){t.isLoading=!1,t.cartData=e.data.data}))},updateCart:function(t){var e=this,c={product_id:t.id,qty:t.qty};this.isLoading=!0,this.$http.put("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart/").concat(t.id),{data:c}).then((function(){e.getCartData(),e.isLoading=!1,e.emitter.emit("push-toast",{style:"success",title:"已更新購物車"})})).catch((function(t){e.emitter.emit("push-toast",{style:"danger",title:"更新購物車失敗",content:t.response.data.message})}))},removeCart:function(t){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/cart/").concat(t)).then((function(){e.getCartData(),e.removeId="",e.isLoading=!1,e.emitter.emit("push-cart"),e.emitter.emit("push-toast",{style:"success",title:"已移除商品"})})).catch((function(t){e.isLoading=!1,e.removeId="",e.emitter.emit("push-toast",{style:"danger",title:"移除商品失敗",content:t.response.data.message})}))},removeAllCart:function(){var t=this;this.isLoading=!0,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/carts")).then((function(){t.getCartData(),t.removeId="",t.isLoading=!1,t.emitter.emit("push-cart"),t.emitter.emit("push-toast",{style:"success",title:"已清空購物車"})})).catch((function(e){t.isLoading=!1,t.removeId="",t.emitter.emit("push-toast",{style:"danger",title:"清空購物車失敗",content:e.response.data.message})}))},useCoupon:function(){var t=this,e={code:this.couponCode};this.$http.post("".concat("https://vue3-course-api.hexschool.io/","v2/api/").concat("tedbirdy","/coupon"),{data:e}).then((function(e){t.getCartData(),t.couponUsed=e.data.success,t.emitter.emit("push-toast",{style:"success",title:"已使用折扣碼"})})).catch((function(e){t.$refs.couponinput.value="",t.$refs.couponinput.placeholder="小遊戲可取得優惠碼喔!",t.emitter.emit("push-toast",{style:"danger",title:"使用折扣碼失敗",content:e.response.data.message})}))}},mounted:function(){this.getCartData()}},ct=(c("04f9"),c("6b0d")),nt=c.n(ct);const at=nt()(et,[["render",Z]]);e["default"]=at},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),s=c("e8b5"),i=c("861d"),l=c("7b0b"),r=c("07fa"),u=c("8418"),d=c("65f0"),b=c("1dde"),p=c("b622"),j=c("2d00"),O=p("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",h=a.TypeError,m=j>=51||!o((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),v=b("concat"),y=function(t){if(!i(t))return!1;var e=t[O];return void 0!==e?!!e:s(t)},C=!m||!v;n({target:"Array",proto:!0,forced:C},{concat:function(t){var e,c,n,a,o,s=l(this),i=d(s,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],y(o)){if(a=r(o),b+a>g)throw h(f);for(c=0;c<a;c++,b++)c in o&&u(i,b,o[c])}else{if(b>=g)throw h(f);u(i,b++,o)}return i.length=b,i}})},af6f:function(t,e,c){"use strict";c("114d")},c2a1:function(t,e,c){"use strict";var n=c("7a23"),a=c("cd2c"),o=c.n(a),s={class:"loading-bg"},i=Object(n["h"])('<div class="load-content"><div class="load-img"><img src="'+o.a+'" alt="母雞動圖"></div><div class="load-txt"><span style="--i:1;">N</span><span style="--i:2;">o</span><span style="--i:3;">w</span><span style="--i:4;"> </span><span style="--i:5;">L</span><span style="--i:6;">o</span><span style="--i:7;">a</span><span style="--i:8;">d</span><span style="--i:9;">i</span><span style="--i:10;">n</span><span style="--i:11;">g</span></div></div>',1),l=[i];function r(t,e){return Object(n["z"])(),Object(n["f"])("div",s,l)}c("af6f");var u=c("6b0d"),d=c.n(u);const b={},p=d()(b,[["render",r]]);e["a"]=p},cd2c:function(t,e,c){t.exports=c.p+"img/chicken.f41d8263.gif"}}]);
//# sourceMappingURL=chunk-465f0342.d6c02688.js.map